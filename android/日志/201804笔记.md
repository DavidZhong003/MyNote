# Fragment中 addToBackStack #

    `transaction.replace(viewId,fragment).addToBackStack().commit()`

其中replace方法可以分解成为
	
	`transaction.add().show().hide().remove()`

addToBackStack()保存的是一系列针对一个fragmentTransaction的操作记录


# Fragment分析 #

## 生命周期 ##

如下图

![Fragment 生命周期](https://img-blog.csdn.net/20161015155439411)



在FragmentActivity的onCreate方法中


	protected void onCreate(@Nullable Bundle savedInstanceState) {
        this.mFragments.attachHost((Fragment)null);
        ...
		...
        this.mFragments.dispatchCreate();
    }

其中mFragments是

	`final FragmentController mFragments = FragmentController.createController(new FragmentActivity.HostCallbacks());`

其中FragmentContofller 有个mHost成员变量就是传入的HostCallbacks,继承FragmentHostCallback

首先查看`attachHost`方法

	 public void attachHost(Fragment parent) {
        mHost.mFragmentManager.attachController(
                mHost, mHost /*container*/, parent);
    }

其中mFragmentManager 是FragmentManagerImpl对象,继承FragmentManager

	public void attachController(FragmentHostCallback host,
            FragmentContainer container, Fragment parent) {
        if (mHost != null) throw new IllegalStateException("Already attached");
        mHost = host;
        mContainer = container;
        mParent = parent;
    }

其中这里只是做了一些变量的赋值.



# Kotlin 中where关键字 #

在泛型中如果一个变量有多个上界可用where指定,如:

	fun <T> cloneWhenGreater(list: List<T>, threshold: T): List<T>
    	where T : Comparable,
          	  T : Cloneable {
  		return list.filter { it > threshold }.map { it.clone() }
	}
# fix bug 本地时间与服务器时间相差大 #

保存两个时间差,每次提交时间戳进行转换.

# 方法数超过65535 #

- 原因

Dalvik Executable 规范将可在单个 DEX 文件内可引用的方法总数限制在 65,536，其中包括 Android 框架方法、库方法以及您自己代码中的方法。在计算机科学领域内，术语千（简称 K）表示 1024（或 2^10）。由于 65,536 等于 64 X 1024，因此这一限制也称为“64K 引用限制".

- 解决方案

1. 使用 Dalvik 可执行文件分包支持库

	5.0之后

		android {
    		defaultConfig {
        	...
        	minSdkVersion 21 
        	targetSdkVersion 26
        	multiDexEnabled true
    	}
    	...
		}

	5.0之前

		android {
    		defaultConfig {
        		...
        		minSdkVersion 15 
        		targetSdkVersion 26
        		multiDexEnabled true
    		}
    	...
		}

		dependencies {
  			compile 'com.android.support:multidex:1.0.1'
		}

修改application类
继承MultiDexApplication 或者

 	@Override
  	protected void attachBaseContext(Context base) {
     	super.attachBaseContext(context);
     	Multidex.install(this);
  	}

2. 插件化


# CMake 引入第三方库 #


# 添加第三方so库Crt
add_library( # 设置so库名字
             Crt-lib
             # 设置为共享so库文件
             SHARED
             # 构建so库的源文件
             IMPORTED)

set_target_properties(Crt-lib
  PROPERTIES IMPORTED_LOCATION
  ${CMAKE_SOURCE_DIR}/src/main/jniLibs/${ANDROID_ABI}/libCrt.so)