1. Java 内存区域有哪些？
   主要分两个部分线程共享区域，线程隔离区域：
   a. 线程共享区域：
   - **堆内存**（heap）：存放对象实例。
   - **方法区**（Method Area）：存放类、常量、静态变量等数据。
      - **常量池**（Runtime Constant Pool）：存放字面常量，符号引用。

   b. 线程隔离区域（线程私有）：
     - **程序计数器**(Program Counter Register)：线程执行字节码行号。
     - **栈内存**（Stacks）：java方法执行内存。
     - **本地方法栈内存**（Native Method Stacks）：本地方法执行内存，同栈内存。
 
2. 虚拟机中对象怎么创建？
   主要分5个步骤：
   1. **加载类到方法区**。
   2. **堆内存分配**（**指针碰撞**[内存连续时候，挪指针]和**空闲列表**两种方式）。
   3. **内存初始化**。
   4. **设置对象信息**。
   5. **执行init构造方法**，初始化相应的字段值。

3. 对象内存中由什么组成？
   主要分3个部分：
   1. **对象头**：存储对象hash码，锁信息，线程信息，GC分代信息等。
   2. **实例数据**：存储对象的字段信息（包括父类继承字段）。
   3. **填充数据**：占位符作用（一些虚拟机要求是8个字节整数倍）

4. 方法栈如何实现访问定位对象？
   方法栈通过reference数据来操作对象，而访问定位主要有两种方式：
   1. **句柄访问**：堆内存存放对象实例以及类型指针
   2. **指针访问**：直接存储对象实例地址

---
1. 怎么判断对象可被回收？
  java里面主要是通过可达性分析来判断一个对象是否死亡，主要步骤是：查看该对象引用链顶端是否有**GC Roots**对象（被栈区或者方法区引用的对象），没有就可判断回收。
  
2. 引用有哪几种类型？分别有什么特点？
   有4种类型：
   - 强引用：不回收
   - 软引用：内存不足回收。（SoftReference）
   - 弱引用：GC前回收。（WeekReference）
   - 虚引用：无法获取实例。（PhantomReference）
3. 垃圾回收算法有哪些？
   - 标记-清除
   - 复制
   - 标记-整理
   - 分代收集 

4. 分代收集算法是什么？
   划分新生代和老年代（新生代使用复制算法），老年代使用标记算法。具体是：
   把内存分为新生代和老年代。新生代分为一个较大的Eden 区和两个较小的survivor区。新生代使用复制算法，垃圾回收时候把Eden和一个survivor区的不参与回收的对象复制到另外一个survivor区（当这个区域的内存不够时候进行空间分配担保策略），然后清空；而老年代则使用标记-整理或者标记-清除算法。

5. 内存分配策略是什么？
   - 对象优先分配到新生代Eden区域
   - 大对象分配老年代
   - 长期存活对象进入老年代

---
1. jmap 工具是什么？怎么使用？
java内存映像工具，可获取dump文件（进程的内存镜像文件），查看空间使用率。具体使用是`jmap [相关操作] vmid`

2. jhat 工具是什么？怎么使用？
用来分析dump 文件，一般结合其他工具使用。

3. Class 类文件结构是什么？
class 文件 8位字节为基础单位的二进制流（不是二进制文件），里面只有两种数据类型：无符号数、表。其中内容主要有：
- 魔数（cafebaby）和版本号
- 常量表：
  - 类或接口全名
  - 方法名称和修饰符
  - 字段名称（属性）和修饰符
- 访问标记（2个字节）
  - 类或接口标记
  - 作用域修饰符（public等）
  - 是否抽象
  - final
- 类继承索引表
  - 主要是父类、接口等全限定名
  
- 变量表（静态变量、成员变量）
  - 作用域
  - 所属（static）
  - 可变（final）
  - 并发可见（volatile）
  - 序列化（transient）
  - 数据类型
  - 属性名称
  
- 方法表

  - 作用域
  - 名称索引
  - 描述符索引
  - 属性表（方法主要内容，里面包含方法体含有的 字节码指令，局部变量表，类方法字段表，异常等信息）
  
4. 类的生命周期？

- 加载
  - 获取二进制流
  - 内存方法区生成相应数据结构
  - 生成java.lang.Class 类引用
- 验证
  - 文件格式验证（java版本等）
  - 元数据验证（类的相关信息）
  - 字节码验证（方法体内的相关信息）
  - 符号引用验证（自身以为的符号验证）
- 准备
  - 静态变量分配存储空间
  - 初始值（不同类型数据有不同值）
- 解析（符号引用->内存引用）
  - 类或者接口解析
  - 字段解析
  - 类方法解析
  - 接口方法解析
- 初始化（clinit方法执行）
  - 父类类构造器方法（clinit方法，静态变量赋值，static语句）执行
  - 子类类构造器方法执行
- 使用
- 卸载
5. 怎么加载一个类？

6. 什么是类加载器？
7. 双亲委派模型是啥？